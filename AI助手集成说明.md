# AI 助手集成说明

## ✅ 集成完成

AI 助手功能已成功集成到学生端和教师端页面！

## 功能特点

### 1. **智能对话**
- 基于硅基流动 Qwen2.5-7B-Instruct 模型
- 支持中英文双语对话
- 实时响应，流畅交互

### 2. **角色定制**
- **学生端**：帮助学生解答编程问题、解释代码概念、提供学习建议
- **教师端**：协助教师设计作业、提供教学建议、帮助批改作业

### 3. **用户体验**
- 悬浮按钮，随时唤起
- 优雅的渐变设计
- 支持键盘快捷键（Enter 发送，Shift+Enter 换行）
- 消息历史记录
- 加载状态提示

## 使用方法

### 学生端
1. 登录学生账户
2. 在页面右下角看到紫色渐变的 AI 助手按钮（✨图标）
3. 点击按钮打开聊天窗口
4. 输入问题，按 Enter 发送
5. AI 会根据学生角色提供针对性的学习帮助

### 教师端
1. 登录教师账户
2. 在页面右下角看到紫色渐变的 AI 助手按钮（✨图标）
3. 点击按钮打开聊天窗口
4. 输入问题，按 Enter 发送
5. AI 会根据教师角色提供教学相关的专业建议

## 技术实现

### 前端组件
- **位置**：`src/components/AIAssistant.js`
- **集成位置**：
  - 学生端：`src/components/NewStudentDashboard.js`
  - 教师端：`src/components/TeacherDashboard.js`

### 后端 API
- **路由文件**：`backend/routes/ai.js`
- **API 端点**：`POST /api/ai/chat`
- **AI 服务**：硅基流动（SiliconFlow）
- **模型**：Qwen/Qwen2.5-7B-Instruct（免费）

### 环境配置
- **配置文件**：`backend/.env`
- **API 密钥**：已配置 `SILICONFLOW_API_KEY`

## API 请求格式

```javascript
POST http://localhost:5000/api/ai/chat

{
  "messages": [
    {
      "role": "user",
      "content": "如何学习 JavaScript？",
      "timestamp": "2024-01-01T00:00:00.000Z"
    }
  ],
  "userRole": "student",  // 或 "teacher"
  "userName": "张三"
}
```

## API 响应格式

```javascript
{
  "reply": "学习 JavaScript 可以从以下几个方面入手：\n1. 基础语法...\n2. DOM 操作...\n3. 异步编程..."
}
```

## 系统提示词

### 学生端提示词
```
你是一个友好的编程学习助手，正在帮助学生 {userName}。你可以帮助学生：
1. 解答编程学习中的问题
2. 解释代码概念和语法
3. 提供学习建议和资源
4. 帮助调试代码问题
请用简单易懂的语言回答问题，鼓励学生独立思考。
```

### 教师端提示词
```
你是一个专业的编程教学助手，正在帮助教师 {userName}。你可以帮助教师：
1. 设计编程作业和课程内容
2. 解答教学相关问题
3. 提供教学建议和最佳实践
4. 帮助批改和评估学生作业
请用专业、友好的语气回答问题。
```

## 国际化支持

AI 助手完全支持中英文切换：
- 界面文本根据系统语言自动切换
- 支持中英文问答
- 错误提示双语显示

## 错误处理

- 网络错误：显示友好的错误提示
- API 失败：提示用户检查后端服务
- 加载状态：显示"思考中..."动画

## 注意事项

1. **后端服务**：确保后端服务运行在 `http://localhost:5000`
2. **API 密钥**：已配置硅基流动的免费 API 密钥
3. **网络连接**：需要网络连接才能使用 AI 功能
4. **响应时间**：通常在 2-5 秒内得到回复

## 测试建议

### 学生端测试问题
- "如何学习 JavaScript？"
- "什么是闭包？"
- "如何调试代码？"
- "CSS 选择器有哪些？"

### 教师端测试问题
- "如何设计一个 HTML 基础作业？"
- "怎样评估学生的代码质量？"
- "有什么好的教学方法？"
- "如何帮助学生理解异步编程？"

## 未来优化方向

1. **对话历史持久化**：保存聊天记录到数据库
2. **上下文记忆**：跨会话保持对话上下文
3. **代码高亮**：在回复中支持代码语法高亮
4. **快捷问题**：提供常见问题快捷按钮
5. **语音输入**：支持语音转文字输入
6. **导出对话**：支持导出聊天记录

## 故障排查

### 问题：AI 助手无响应
**解决方案**：
1. 检查后端服务是否运行：`cd backend && node index.js`
2. 检查控制台是否有错误信息
3. 验证 API 密钥是否正确配置

### 问题：显示"AI服务暂时不可用"
**解决方案**：
1. 检查网络连接
2. 验证硅基流动 API 是否可访问
3. 查看后端日志获取详细错误信息

### 问题：按钮不显示
**解决方案**：
1. 确认已登录（学生或教师账户）
2. 检查浏览器控制台是否有 JavaScript 错误
3. 刷新页面重试

## 支持

如有问题，请查看：
- 浏览器控制台（F12）
- 后端日志
- 网络请求（Network 标签）

---

**集成完成时间**：2024年
**版本**：v1.0
**状态**：✅ 已上线
