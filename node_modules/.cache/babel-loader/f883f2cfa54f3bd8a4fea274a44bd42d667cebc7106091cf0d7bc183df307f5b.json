{"ast":null,"code":"var _jsxFileName = \"E:\\\\classes\\\\visualazation\\\\js_edit\\\\js-editor(1)\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\n// App.js - 主应用入口\nimport React, { useState } from 'react';\nimport FullEditor from './FullEditor';\nimport LoginPage from './components/LoginPage';\nimport TeacherDashboard from './components/TeacherDashboard';\nimport StudentDashboard from './components/StudentDashboard';\n\n// 全局样式\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst globalStyles = `\n  @keyframes spin {\n    to { transform: rotate(360deg); }\n  }\n  @keyframes fadeIn {\n    from { opacity: 0; transform: translateY(10px); }\n    to { opacity: 1; transform: translateY(0); }\n  }\n  @keyframes slideIn {\n    from { opacity: 0; transform: translateX(-20px); }\n    to { opacity: 1; transform: translateX(0); }\n  }\n  .animate-fade-in {\n    animation: fadeIn 0.3s ease-out forwards;\n  }\n  .card-hover {\n    transition: all 0.3s ease;\n  }\n  .card-hover:hover {\n    transform: translateY(-4px);\n    box-shadow: 0 12px 40px rgba(0,0,0,0.15);\n  }\n`;\n\n// 初始数据\nconst INITIAL_DATA = {\n  students: [],\n  assignments: [],\n  submissions: [],\n  codeRepository: []\n};\n\n// 主应用组件\nfunction App() {\n  _s();\n  const [data, setData] = useState(INITIAL_DATA);\n  const [user, setUser] = useState(null);\n  const [view, setView] = useState('login');\n  const [editorConfig, setEditorConfig] = useState(null);\n  const handleSubmission = async selectedFiles => {\n    const assign = data.assignments.find(a => a.id === (editorConfig === null || editorConfig === void 0 ? void 0 : editorConfig.assignmentId));\n    if (assign && (user === null || user === void 0 ? void 0 : user.role) === 'student') {\n      const newSub = {\n        id: `sub${Date.now()}`,\n        studentId: user.id,\n        studentName: user.name,\n        assignmentId: assign.id,\n        assignmentTitle: assign.title,\n        files: selectedFiles,\n        timestamp: Date.now()\n      };\n      try {\n        await fetch('http://localhost:5000/api/submissions', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(newSub)\n        });\n      } catch (e) {\n        console.log('API调用失败，使用本地存储');\n      }\n      const others = data.submissions.filter(s => !(s.studentId === user.id && s.assignmentId === assign.id));\n      setData(prev => ({\n        ...prev,\n        submissions: [...others, newSub]\n      }));\n      alert('✅ 作业提交成功！');\n    }\n  };\n  const handleLogin = userData => {\n    setUser(userData);\n    setView('dashboard');\n  };\n  const handleLogout = () => {\n    setUser(null);\n    setView('login');\n  };\n  const handleOpenEditor = config => {\n    setEditorConfig(config);\n    setView('editor');\n  };\n  const handleBackFromEditor = () => {\n    setView('dashboard');\n  };\n  const handleSubmitFromEditor = files => {\n    handleSubmission(files);\n    setView('dashboard');\n  };\n\n  // 根据当前视图渲染对应组件\n  const renderView = () => {\n    if (view === 'login') {\n      return /*#__PURE__*/_jsxDEV(LoginPage, {\n        onLogin: handleLogin,\n        students: data.students\n      }, \"login\", false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this);\n    }\n    if (view === 'editor' && editorConfig) {\n      return /*#__PURE__*/_jsxDEV(FullEditor, {\n        ...editorConfig,\n        onBack: handleBackFromEditor,\n        onSubmit: handleSubmitFromEditor\n      }, \"editor\", false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }, this);\n    }\n    if (view === 'dashboard' && user) {\n      if (user.role === 'teacher') {\n        return /*#__PURE__*/_jsxDEV(TeacherDashboard, {\n          data: data,\n          setData: setData,\n          user: user,\n          onOpenEditor: handleOpenEditor,\n          onLogout: handleLogout\n        }, \"teacher-dashboard\", false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 11\n        }, this);\n      }\n      if (user.role === 'student') {\n        return /*#__PURE__*/_jsxDEV(StudentDashboard, {\n          user: user,\n          data: data,\n          onOpenEditor: handleOpenEditor,\n          onLogout: handleLogout\n        }, \"student-dashboard\", false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 11\n        }, this);\n      }\n    }\n\n    // 默认返回登录页\n    return /*#__PURE__*/_jsxDEV(LoginPage, {\n      onLogin: handleLogin,\n      students: data.students\n    }, \"login-default\", false, {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 7\n    }, this);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      minHeight: '100vh'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"style\", {\n      children: globalStyles\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 7\n    }, this), renderView()]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 162,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"vfrNgqjniyxZwy2atrbI/eXpjS0=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","FullEditor","LoginPage","TeacherDashboard","StudentDashboard","jsxDEV","_jsxDEV","globalStyles","INITIAL_DATA","students","assignments","submissions","codeRepository","App","_s","data","setData","user","setUser","view","setView","editorConfig","setEditorConfig","handleSubmission","selectedFiles","assign","find","a","id","assignmentId","role","newSub","Date","now","studentId","studentName","name","assignmentTitle","title","files","timestamp","fetch","method","headers","body","JSON","stringify","e","console","log","others","filter","s","prev","alert","handleLogin","userData","handleLogout","handleOpenEditor","config","handleBackFromEditor","handleSubmitFromEditor","renderView","onLogin","fileName","_jsxFileName","lineNumber","columnNumber","onBack","onSubmit","onOpenEditor","onLogout","style","minHeight","children","_c","$RefreshReg$"],"sources":["E:/classes/visualazation/js_edit/js-editor(1)/src/App.js"],"sourcesContent":["// App.js - 主应用入口\nimport React, { useState } from 'react';\nimport FullEditor from './FullEditor';\nimport LoginPage from './components/LoginPage';\nimport TeacherDashboard from './components/TeacherDashboard';\nimport StudentDashboard from './components/StudentDashboard';\n\n// 全局样式\nconst globalStyles = `\n  @keyframes spin {\n    to { transform: rotate(360deg); }\n  }\n  @keyframes fadeIn {\n    from { opacity: 0; transform: translateY(10px); }\n    to { opacity: 1; transform: translateY(0); }\n  }\n  @keyframes slideIn {\n    from { opacity: 0; transform: translateX(-20px); }\n    to { opacity: 1; transform: translateX(0); }\n  }\n  .animate-fade-in {\n    animation: fadeIn 0.3s ease-out forwards;\n  }\n  .card-hover {\n    transition: all 0.3s ease;\n  }\n  .card-hover:hover {\n    transform: translateY(-4px);\n    box-shadow: 0 12px 40px rgba(0,0,0,0.15);\n  }\n`;\n\n// 初始数据\nconst INITIAL_DATA = {\n  students: [],\n  assignments: [],\n  submissions: [],\n  codeRepository: []\n};\n\n// 主应用组件\nfunction App() {\n  const [data, setData] = useState(INITIAL_DATA);\n  const [user, setUser] = useState(null);\n  const [view, setView] = useState('login');\n  const [editorConfig, setEditorConfig] = useState(null);\n\n  const handleSubmission = async (selectedFiles) => {\n    const assign = data.assignments.find(a => a.id === editorConfig?.assignmentId);\n    if (assign && user?.role === 'student') {\n      const newSub = {\n        id: `sub${Date.now()}`,\n        studentId: user.id,\n        studentName: user.name,\n        assignmentId: assign.id,\n        assignmentTitle: assign.title,\n        files: selectedFiles,\n        timestamp: Date.now()\n      };\n      \n      try {\n        await fetch('http://localhost:5000/api/submissions', {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify(newSub)\n        });\n      } catch (e) {\n        console.log('API调用失败，使用本地存储');\n      }\n      \n      const others = data.submissions.filter(s => !(s.studentId === user.id && s.assignmentId === assign.id));\n      setData(prev => ({ ...prev, submissions: [...others, newSub] }));\n      alert('✅ 作业提交成功！');\n    }\n  };\n\n  const handleLogin = (userData) => {\n    setUser(userData);\n    setView('dashboard');\n  };\n\n  const handleLogout = () => {\n    setUser(null);\n    setView('login');\n  };\n\n  const handleOpenEditor = (config) => {\n    setEditorConfig(config);\n    setView('editor');\n  };\n\n  const handleBackFromEditor = () => {\n    setView('dashboard');\n  };\n\n  const handleSubmitFromEditor = (files) => {\n    handleSubmission(files);\n    setView('dashboard');\n  };\n\n  // 根据当前视图渲染对应组件\n  const renderView = () => {\n    if (view === 'login') {\n      return (\n        <LoginPage \n          key=\"login\"\n          onLogin={handleLogin}\n          students={data.students}\n        />\n      );\n    }\n\n    if (view === 'editor' && editorConfig) {\n      return (\n        <FullEditor\n          key=\"editor\"\n          {...editorConfig}\n          onBack={handleBackFromEditor}\n          onSubmit={handleSubmitFromEditor}\n        />\n      );\n    }\n\n    if (view === 'dashboard' && user) {\n      if (user.role === 'teacher') {\n        return (\n          <TeacherDashboard\n            key=\"teacher-dashboard\"\n            data={data}\n            setData={setData}\n            user={user}\n            onOpenEditor={handleOpenEditor}\n            onLogout={handleLogout}\n          />\n        );\n      }\n      \n      if (user.role === 'student') {\n        return (\n          <StudentDashboard\n            key=\"student-dashboard\"\n            user={user}\n            data={data}\n            onOpenEditor={handleOpenEditor}\n            onLogout={handleLogout}\n          />\n        );\n      }\n    }\n\n    // 默认返回登录页\n    return (\n      <LoginPage \n        key=\"login-default\"\n        onLogin={handleLogin}\n        students={data.students}\n      />\n    );\n  };\n\n  return (\n    <div style={{ minHeight: '100vh' }}>\n      <style>{globalStyles}</style>\n      {renderView()}\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}