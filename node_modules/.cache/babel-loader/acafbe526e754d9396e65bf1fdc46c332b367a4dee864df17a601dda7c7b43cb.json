{"ast":null,"code":"var _jsxFileName = \"E:\\\\classes\\\\visualazation\\\\js_edit\\\\js-editor\\\\src\\\\VisualizationD3.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef } from 'react';\nimport * as d3 from 'd3';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction VisualizationD3({\n  data,\n  width = 800,\n  height = 400\n}) {\n  _s();\n  const svgRef = useRef();\n  useEffect(() => {\n    if (!data || data.length === 0) return;\n\n    // 清空之前的内容\n    d3.select(svgRef.current).selectAll('*').remove();\n\n    // 设置边距\n    const margin = {\n      top: 20,\n      right: 30,\n      bottom: 40,\n      left: 50\n    };\n    const innerWidth = width - margin.left - margin.right;\n    const innerHeight = height - margin.top - margin.bottom;\n\n    // 创建 SVG\n    const svg = d3.select(svgRef.current).attr('width', width).attr('height', height);\n    const g = svg.append('g').attr('transform', `translate(${margin.left},${margin.top})`);\n\n    // 数据转换（确保 x 和 y 是数字）\n    const processedData = data.map(d => ({\n      x: +d.x,\n      y: +d.y,\n      label: d.label || ''\n    }));\n\n    // 创建比例尺\n    const xScale = d3.scaleLinear().domain([0, d3.max(processedData, d => d.x) * 1.1]).range([0, innerWidth]);\n    const yScale = d3.scaleLinear().domain([0, d3.max(processedData, d => d.y) * 1.1]).range([innerHeight, 0]);\n\n    // 添加 X 轴\n    g.append('g').attr('transform', `translate(0,${innerHeight})`).call(d3.axisBottom(xScale)).append('text').attr('x', innerWidth / 2).attr('y', 35).attr('fill', '#fff').attr('text-anchor', 'middle').text('X 轴');\n\n    // 添加 Y 轴\n    g.append('g').call(d3.axisLeft(yScale)).append('text').attr('transform', 'rotate(-90)').attr('x', -innerHeight / 2).attr('y', -35).attr('fill', '#fff').attr('text-anchor', 'middle').text('Y 轴');\n\n    // 绘制散点\n    g.selectAll('circle').data(processedData).enter().append('circle').attr('cx', d => xScale(d.x)).attr('cy', d => yScale(d.y)).attr('r', 6).attr('fill', 'steelblue').attr('opacity', 0.7).on('mouseover', function (event, d) {\n      d3.select(this).attr('r', 8).attr('fill', 'orange');\n\n      // 显示提示信息\n      g.append('text').attr('class', 'tooltip').attr('x', xScale(d.x)).attr('y', yScale(d.y) - 15).attr('text-anchor', 'middle').attr('fill', '#fff').attr('font-size', '12px').text(`${d.label}: (${d.x}, ${d.y})`);\n    }).on('mouseout', function () {\n      d3.select(this).attr('r', 6).attr('fill', 'steelblue');\n      g.selectAll('.tooltip').remove();\n    });\n\n    // 添加标签\n    g.selectAll('text.label').data(processedData).enter().append('text').attr('class', 'label').attr('x', d => xScale(d.x)).attr('y', d => yScale(d.y) - 10).attr('text-anchor', 'middle').attr('fill', '#fff').attr('font-size', '10px').text(d => d.label);\n  }, [data, width, height]);\n  return /*#__PURE__*/_jsxDEV(\"svg\", {\n    ref: svgRef,\n    style: {\n      background: '#1e1e1e',\n      borderRadius: '4px'\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 113,\n    columnNumber: 5\n  }, this);\n}\n_s(VisualizationD3, \"89Ty783ABEwsfMbSOeu9vscWF34=\");\n_c = VisualizationD3;\nexport default VisualizationD3;\nvar _c;\n$RefreshReg$(_c, \"VisualizationD3\");","map":{"version":3,"names":["React","useEffect","useRef","d3","jsxDEV","_jsxDEV","VisualizationD3","data","width","height","_s","svgRef","length","select","current","selectAll","remove","margin","top","right","bottom","left","innerWidth","innerHeight","svg","attr","g","append","processedData","map","d","x","y","label","xScale","scaleLinear","domain","max","range","yScale","call","axisBottom","text","axisLeft","enter","on","event","ref","style","background","borderRadius","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["E:/classes/visualazation/js_edit/js-editor/src/VisualizationD3.js"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\r\nimport * as d3 from 'd3';\r\n\r\nfunction VisualizationD3({ data, width = 800, height = 400 }) {\r\n  const svgRef = useRef();\r\n\r\n  useEffect(() => {\r\n    if (!data || data.length === 0) return;\r\n\r\n    // 清空之前的内容\r\n    d3.select(svgRef.current).selectAll('*').remove();\r\n\r\n    // 设置边距\r\n    const margin = { top: 20, right: 30, bottom: 40, left: 50 };\r\n    const innerWidth = width - margin.left - margin.right;\r\n    const innerHeight = height - margin.top - margin.bottom;\r\n\r\n    // 创建 SVG\r\n    const svg = d3.select(svgRef.current)\r\n      .attr('width', width)\r\n      .attr('height', height);\r\n\r\n    const g = svg.append('g')\r\n      .attr('transform', `translate(${margin.left},${margin.top})`);\r\n\r\n    // 数据转换（确保 x 和 y 是数字）\r\n    const processedData = data.map(d => ({\r\n      x: +d.x,\r\n      y: +d.y,\r\n      label: d.label || ''\r\n    }));\r\n\r\n    // 创建比例尺\r\n    const xScale = d3.scaleLinear()\r\n      .domain([0, d3.max(processedData, d => d.x) * 1.1])\r\n      .range([0, innerWidth]);\r\n\r\n    const yScale = d3.scaleLinear()\r\n      .domain([0, d3.max(processedData, d => d.y) * 1.1])\r\n      .range([innerHeight, 0]);\r\n\r\n    // 添加 X 轴\r\n    g.append('g')\r\n      .attr('transform', `translate(0,${innerHeight})`)\r\n      .call(d3.axisBottom(xScale))\r\n      .append('text')\r\n      .attr('x', innerWidth / 2)\r\n      .attr('y', 35)\r\n      .attr('fill', '#fff')\r\n      .attr('text-anchor', 'middle')\r\n      .text('X 轴');\r\n\r\n    // 添加 Y 轴\r\n    g.append('g')\r\n      .call(d3.axisLeft(yScale))\r\n      .append('text')\r\n      .attr('transform', 'rotate(-90)')\r\n      .attr('x', -innerHeight / 2)\r\n      .attr('y', -35)\r\n      .attr('fill', '#fff')\r\n      .attr('text-anchor', 'middle')\r\n      .text('Y 轴');\r\n\r\n    // 绘制散点\r\n    g.selectAll('circle')\r\n      .data(processedData)\r\n      .enter()\r\n      .append('circle')\r\n      .attr('cx', d => xScale(d.x))\r\n      .attr('cy', d => yScale(d.y))\r\n      .attr('r', 6)\r\n      .attr('fill', 'steelblue')\r\n      .attr('opacity', 0.7)\r\n      .on('mouseover', function(event, d) {\r\n        d3.select(this)\r\n          .attr('r', 8)\r\n          .attr('fill', 'orange');\r\n        \r\n        // 显示提示信息\r\n        g.append('text')\r\n          .attr('class', 'tooltip')\r\n          .attr('x', xScale(d.x))\r\n          .attr('y', yScale(d.y) - 15)\r\n          .attr('text-anchor', 'middle')\r\n          .attr('fill', '#fff')\r\n          .attr('font-size', '12px')\r\n          .text(`${d.label}: (${d.x}, ${d.y})`);\r\n      })\r\n      .on('mouseout', function() {\r\n        d3.select(this)\r\n          .attr('r', 6)\r\n          .attr('fill', 'steelblue');\r\n        \r\n        g.selectAll('.tooltip').remove();\r\n      });\r\n\r\n    // 添加标签\r\n    g.selectAll('text.label')\r\n      .data(processedData)\r\n      .enter()\r\n      .append('text')\r\n      .attr('class', 'label')\r\n      .attr('x', d => xScale(d.x))\r\n      .attr('y', d => yScale(d.y) - 10)\r\n      .attr('text-anchor', 'middle')\r\n      .attr('fill', '#fff')\r\n      .attr('font-size', '10px')\r\n      .text(d => d.label);\r\n\r\n  }, [data, width, height]);\r\n\r\n  return (\r\n    <svg ref={svgRef} style={{ background: '#1e1e1e', borderRadius: '4px' }}></svg>\r\n  );\r\n}\r\n\r\nexport default VisualizationD3;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAChD,OAAO,KAAKC,EAAE,MAAM,IAAI;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEzB,SAASC,eAAeA,CAAC;EAAEC,IAAI;EAAEC,KAAK,GAAG,GAAG;EAAEC,MAAM,GAAG;AAAI,CAAC,EAAE;EAAAC,EAAA;EAC5D,MAAMC,MAAM,GAAGT,MAAM,CAAC,CAAC;EAEvBD,SAAS,CAAC,MAAM;IACd,IAAI,CAACM,IAAI,IAAIA,IAAI,CAACK,MAAM,KAAK,CAAC,EAAE;;IAEhC;IACAT,EAAE,CAACU,MAAM,CAACF,MAAM,CAACG,OAAO,CAAC,CAACC,SAAS,CAAC,GAAG,CAAC,CAACC,MAAM,CAAC,CAAC;;IAEjD;IACA,MAAMC,MAAM,GAAG;MAAEC,GAAG,EAAE,EAAE;MAAEC,KAAK,EAAE,EAAE;MAAEC,MAAM,EAAE,EAAE;MAAEC,IAAI,EAAE;IAAG,CAAC;IAC3D,MAAMC,UAAU,GAAGd,KAAK,GAAGS,MAAM,CAACI,IAAI,GAAGJ,MAAM,CAACE,KAAK;IACrD,MAAMI,WAAW,GAAGd,MAAM,GAAGQ,MAAM,CAACC,GAAG,GAAGD,MAAM,CAACG,MAAM;;IAEvD;IACA,MAAMI,GAAG,GAAGrB,EAAE,CAACU,MAAM,CAACF,MAAM,CAACG,OAAO,CAAC,CAClCW,IAAI,CAAC,OAAO,EAAEjB,KAAK,CAAC,CACpBiB,IAAI,CAAC,QAAQ,EAAEhB,MAAM,CAAC;IAEzB,MAAMiB,CAAC,GAAGF,GAAG,CAACG,MAAM,CAAC,GAAG,CAAC,CACtBF,IAAI,CAAC,WAAW,EAAE,aAAaR,MAAM,CAACI,IAAI,IAAIJ,MAAM,CAACC,GAAG,GAAG,CAAC;;IAE/D;IACA,MAAMU,aAAa,GAAGrB,IAAI,CAACsB,GAAG,CAACC,CAAC,KAAK;MACnCC,CAAC,EAAE,CAACD,CAAC,CAACC,CAAC;MACPC,CAAC,EAAE,CAACF,CAAC,CAACE,CAAC;MACPC,KAAK,EAAEH,CAAC,CAACG,KAAK,IAAI;IACpB,CAAC,CAAC,CAAC;;IAEH;IACA,MAAMC,MAAM,GAAG/B,EAAE,CAACgC,WAAW,CAAC,CAAC,CAC5BC,MAAM,CAAC,CAAC,CAAC,EAAEjC,EAAE,CAACkC,GAAG,CAACT,aAAa,EAAEE,CAAC,IAAIA,CAAC,CAACC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAClDO,KAAK,CAAC,CAAC,CAAC,EAAEhB,UAAU,CAAC,CAAC;IAEzB,MAAMiB,MAAM,GAAGpC,EAAE,CAACgC,WAAW,CAAC,CAAC,CAC5BC,MAAM,CAAC,CAAC,CAAC,EAAEjC,EAAE,CAACkC,GAAG,CAACT,aAAa,EAAEE,CAAC,IAAIA,CAAC,CAACE,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAClDM,KAAK,CAAC,CAACf,WAAW,EAAE,CAAC,CAAC,CAAC;;IAE1B;IACAG,CAAC,CAACC,MAAM,CAAC,GAAG,CAAC,CACVF,IAAI,CAAC,WAAW,EAAE,eAAeF,WAAW,GAAG,CAAC,CAChDiB,IAAI,CAACrC,EAAE,CAACsC,UAAU,CAACP,MAAM,CAAC,CAAC,CAC3BP,MAAM,CAAC,MAAM,CAAC,CACdF,IAAI,CAAC,GAAG,EAAEH,UAAU,GAAG,CAAC,CAAC,CACzBG,IAAI,CAAC,GAAG,EAAE,EAAE,CAAC,CACbA,IAAI,CAAC,MAAM,EAAE,MAAM,CAAC,CACpBA,IAAI,CAAC,aAAa,EAAE,QAAQ,CAAC,CAC7BiB,IAAI,CAAC,KAAK,CAAC;;IAEd;IACAhB,CAAC,CAACC,MAAM,CAAC,GAAG,CAAC,CACVa,IAAI,CAACrC,EAAE,CAACwC,QAAQ,CAACJ,MAAM,CAAC,CAAC,CACzBZ,MAAM,CAAC,MAAM,CAAC,CACdF,IAAI,CAAC,WAAW,EAAE,aAAa,CAAC,CAChCA,IAAI,CAAC,GAAG,EAAE,CAACF,WAAW,GAAG,CAAC,CAAC,CAC3BE,IAAI,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,CACdA,IAAI,CAAC,MAAM,EAAE,MAAM,CAAC,CACpBA,IAAI,CAAC,aAAa,EAAE,QAAQ,CAAC,CAC7BiB,IAAI,CAAC,KAAK,CAAC;;IAEd;IACAhB,CAAC,CAACX,SAAS,CAAC,QAAQ,CAAC,CAClBR,IAAI,CAACqB,aAAa,CAAC,CACnBgB,KAAK,CAAC,CAAC,CACPjB,MAAM,CAAC,QAAQ,CAAC,CAChBF,IAAI,CAAC,IAAI,EAAEK,CAAC,IAAII,MAAM,CAACJ,CAAC,CAACC,CAAC,CAAC,CAAC,CAC5BN,IAAI,CAAC,IAAI,EAAEK,CAAC,IAAIS,MAAM,CAACT,CAAC,CAACE,CAAC,CAAC,CAAC,CAC5BP,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,CACZA,IAAI,CAAC,MAAM,EAAE,WAAW,CAAC,CACzBA,IAAI,CAAC,SAAS,EAAE,GAAG,CAAC,CACpBoB,EAAE,CAAC,WAAW,EAAE,UAASC,KAAK,EAAEhB,CAAC,EAAE;MAClC3B,EAAE,CAACU,MAAM,CAAC,IAAI,CAAC,CACZY,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,CACZA,IAAI,CAAC,MAAM,EAAE,QAAQ,CAAC;;MAEzB;MACAC,CAAC,CAACC,MAAM,CAAC,MAAM,CAAC,CACbF,IAAI,CAAC,OAAO,EAAE,SAAS,CAAC,CACxBA,IAAI,CAAC,GAAG,EAAES,MAAM,CAACJ,CAAC,CAACC,CAAC,CAAC,CAAC,CACtBN,IAAI,CAAC,GAAG,EAAEc,MAAM,CAACT,CAAC,CAACE,CAAC,CAAC,GAAG,EAAE,CAAC,CAC3BP,IAAI,CAAC,aAAa,EAAE,QAAQ,CAAC,CAC7BA,IAAI,CAAC,MAAM,EAAE,MAAM,CAAC,CACpBA,IAAI,CAAC,WAAW,EAAE,MAAM,CAAC,CACzBiB,IAAI,CAAC,GAAGZ,CAAC,CAACG,KAAK,MAAMH,CAAC,CAACC,CAAC,KAAKD,CAAC,CAACE,CAAC,GAAG,CAAC;IACzC,CAAC,CAAC,CACDa,EAAE,CAAC,UAAU,EAAE,YAAW;MACzB1C,EAAE,CAACU,MAAM,CAAC,IAAI,CAAC,CACZY,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,CACZA,IAAI,CAAC,MAAM,EAAE,WAAW,CAAC;MAE5BC,CAAC,CAACX,SAAS,CAAC,UAAU,CAAC,CAACC,MAAM,CAAC,CAAC;IAClC,CAAC,CAAC;;IAEJ;IACAU,CAAC,CAACX,SAAS,CAAC,YAAY,CAAC,CACtBR,IAAI,CAACqB,aAAa,CAAC,CACnBgB,KAAK,CAAC,CAAC,CACPjB,MAAM,CAAC,MAAM,CAAC,CACdF,IAAI,CAAC,OAAO,EAAE,OAAO,CAAC,CACtBA,IAAI,CAAC,GAAG,EAAEK,CAAC,IAAII,MAAM,CAACJ,CAAC,CAACC,CAAC,CAAC,CAAC,CAC3BN,IAAI,CAAC,GAAG,EAAEK,CAAC,IAAIS,MAAM,CAACT,CAAC,CAACE,CAAC,CAAC,GAAG,EAAE,CAAC,CAChCP,IAAI,CAAC,aAAa,EAAE,QAAQ,CAAC,CAC7BA,IAAI,CAAC,MAAM,EAAE,MAAM,CAAC,CACpBA,IAAI,CAAC,WAAW,EAAE,MAAM,CAAC,CACzBiB,IAAI,CAACZ,CAAC,IAAIA,CAAC,CAACG,KAAK,CAAC;EAEvB,CAAC,EAAE,CAAC1B,IAAI,EAAEC,KAAK,EAAEC,MAAM,CAAC,CAAC;EAEzB,oBACEJ,OAAA;IAAK0C,GAAG,EAAEpC,MAAO;IAACqC,KAAK,EAAE;MAAEC,UAAU,EAAE,SAAS;MAAEC,YAAY,EAAE;IAAM;EAAE;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAM,CAAC;AAEnF;AAAC5C,EAAA,CA/GQJ,eAAe;AAAAiD,EAAA,GAAfjD,eAAe;AAiHxB,eAAeA,eAAe;AAAC,IAAAiD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}