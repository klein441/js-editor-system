# 🎯 锚点设置功能详细说明

## 功能概述

锚点设置功能允许教师在PPT课件的任意位置精确标记知识点，通过直观的可视化界面实现精准定位。

## 🎨 界面特性

### 1. 直观的可视化设置
- **点击设置**: 直接在幻灯片上点击任意位置添加锚点
- **实时预览**: 点击后立即显示绿色预览锚点
- **精确坐标**: 支持百分比坐标系统，确保在不同屏幕尺寸下位置准确

### 2. 锚点可视化显示
- **醒目标识**: 红色圆圈标识，白色边框，易于识别
- **资源计数**: 圆圈内显示关联资源数量
- **名称标签**: 锚点下方显示知识点名称
- **动画效果**: 脉冲动画吸引注意力
- **悬停效果**: 鼠标悬停时放大显示

### 3. 精确定位工具
- **十字准线**: 鼠标移动时显示坐标提示
- **坐标输入**: 支持手动输入精确的X、Y坐标
- **实时同步**: 修改坐标时预览位置实时更新
- **范围限制**: 自动限制坐标在0-100%范围内

## 🛠️ 使用方法

### 方法一：点击设置（推荐）
1. 进入锚点编辑器
2. 选择要标记的幻灯片
3. 直接点击幻灯片上的目标位置
4. 绿色预览锚点立即显示
5. 填写锚点名称和描述
6. 点击"保存"完成创建

### 方法二：坐标输入
1. 点击幻灯片任意位置进入编辑模式
2. 在右侧面板手动输入X、Y坐标
3. 预览锚点位置实时更新
4. 填写锚点信息并保存

### 方法三：编辑现有锚点
1. 点击已存在的红色锚点圆圈
2. 进入编辑模式
3. 修改坐标或其他信息
4. 保存更新

## 🎯 锚点标识说明

### 预览锚点（绿色）
- **颜色**: 绿色圆圈
- **标识**: 中心显示"+"号
- **标签**: "新锚点位置"
- **用途**: 显示即将创建的锚点位置

### 已保存锚点（红色）
- **颜色**: 红色圆圈
- **标识**: 中心显示资源数量
- **标签**: 显示锚点名称
- **用途**: 标识已保存的知识点位置

## 📐 坐标系统

### 百分比坐标
- **X轴**: 0% (左边) 到 100% (右边)
- **Y轴**: 0% (顶部) 到 100% (底部)
- **精度**: 支持小数点后两位 (如: 45.67%)
- **自适应**: 在不同屏幕尺寸下保持相对位置

### 坐标示例
```
左上角: (0%, 0%)
右上角: (100%, 0%)
中心点: (50%, 50%)
左下角: (0%, 100%)
右下角: (100%, 100%)
```

## 🎨 视觉设计

### 锚点样式
```css
/* 锚点圆圈 */
.anchor-point {
  width: 20px;
  height: 20px;
  background: #ff4444;
  border: 3px solid white;
  border-radius: 50%;
  box-shadow: 0 2px 10px rgba(0,0,0,0.3);
  animation: pulse 2s infinite;
}

/* 悬停效果 */
.anchor-point:hover {
  transform: scale(1.2);
  transition: transform 0.2s ease;
}
```

### 动画效果
- **脉冲动画**: 2秒循环，轻微缩放吸引注意
- **悬停放大**: 鼠标悬停时放大20%
- **平滑过渡**: 所有变化都有0.2秒过渡动画

## 🔧 技术实现

### 坐标计算
```javascript
// 获取点击位置的百分比坐标
const rect = slideRef.current.getBoundingClientRect();
const x = ((e.clientX - rect.left) / rect.width) * 100;
const y = ((e.clientY - rect.top) / rect.height) * 100;

// 限制坐标范围
const clampedX = Math.max(0, Math.min(100, x));
const clampedY = Math.max(0, Math.min(100, y));
```

### 实时预览
```javascript
// 坐标输入时实时更新预览
onChange={(e) => {
  const newX = parseFloat(e.target.value);
  const newForm = { ...anchorForm, x_position: newX };
  setAnchorForm(newForm);
  if (previewAnchor) {
    setPreviewAnchor(newForm); // 实时更新预览位置
  }
}}
```

## 💡 使用技巧

### 1. 精确定位
- 先大致点击目标区域
- 再通过坐标输入框微调位置
- 观察预览锚点确认位置准确

### 2. 批量设置
- 按幻灯片顺序逐页设置锚点
- 使用幻灯片导航快速切换
- 每页设置完成后再进入下一页

### 3. 位置选择建议
- 选择知识点附近的空白区域
- 避免遮挡重要内容
- 考虑不同屏幕尺寸的显示效果

### 4. 命名规范
- 使用简洁明确的名称
- 体现知识点的核心概念
- 便于学生理解和记忆

## 🎯 最佳实践

### 锚点布局
1. **重要知识点**: 放在显眼位置，如标题附近
2. **补充说明**: 放在相关内容的边缘
3. **代码示例**: 放在代码块的角落
4. **图表说明**: 放在图表的空白区域

### 数量控制
- 每页锚点数量建议不超过3-5个
- 避免锚点过于密集影响视觉效果
- 重点突出最核心的知识点

### 资源关联
- 每个锚点至少关联一种资源
- 优先添加视频资源提升学习效果
- 代码示例要与知识点紧密相关

## 🔍 故障排除

### 常见问题
1. **锚点位置不准确**: 检查坐标数值，使用坐标输入微调
2. **预览不显示**: 刷新页面重新进入编辑模式
3. **保存失败**: 检查网络连接和后端服务状态
4. **锚点重叠**: 调整坐标避免多个锚点位置过近

### 调试技巧
- 使用浏览器开发者工具查看坐标计算
- 检查控制台是否有错误信息
- 确认幻灯片图片已正确加载

## 🚀 未来扩展

### 计划功能
- **拖拽调整**: 支持直接拖拽锚点调整位置
- **批量操作**: 支持复制锚点到其他幻灯片
- **模板保存**: 保存锚点布局作为模板
- **智能推荐**: AI推荐最佳锚点位置

这个锚点设置功能让教师能够精确地在课件上标记知识点，为学生提供更加直观和互动的学习体验！🎓✨